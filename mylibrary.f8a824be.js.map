{"mappings":"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","sources":["src/library-index.js","src/js/library-js/libraryGetRefs.js","src/js/library-js/libraryRenderMarkup.js","src/js/library-js/library.js","src/js/library-js/library-queue.js","src/js/library-js/libraryOpenModal.js"],"sourcesContent":["import './js/team-modal.js';\nimport './js/library-js/library.js';\nimport './js/library-js/library-queue.js';\nimport './js/library-js/libraryOpenModal.js';\nimport './js/scroll-up.js';\n","const libraryGetRefs = () => {\n  return {\n    modal: document.querySelector('.modal'),\n    containerListRef: document.querySelector('.container__list'),\n    modalCloseBtnRef: document.querySelector('.modal__close'),\n    modalFilm: document.querySelector('.modal__film'),\n    modalContainer: document.querySelector('.modal__conteiner'),\n    watchedBthRef: document.querySelector('.js-btn-watched-render'),\n    queueBtnRef: document.querySelector('.js-btn-queue-render'),\n    emptyListContainer: document.querySelector('.js-empty-list-container'),\n  };\n};\nexport default libraryGetRefs;\n","export function libraryRenderMarkup({\n  id,\n  genres,\n  title,\n  vote_average,\n  release_date,\n  poster_path,\n}) {\n  let genresCreate = genres.map(({ name }) => {\n    return name;\n  });\n  if (genresCreate.length > 2) {\n    genresCreate = genresCreate.slice(0, 2).join(', ') + `, Other`;\n  } else {\n    genresCreate = genresCreate.join(', ');\n  }\n  return `\n    <li class=\"film-card__item\" data-id=${id}>\n      <img class=\"film-card__img\"  src=\"https://image.tmdb.org/t/p/w500/${poster_path} \" alt=\"film poster\"  />\n    <h2 class=\"film-card__title\">${title}</h2>\n    <div class=\"film-card__flex\">\n    <p class=\"film-card__flex__text\">${genresCreate} |\n    </p>\n    <p class=\"film-card__flex__text\">${release_date.slice(0, -6)}</p>\n    <p class=\"film-card__flex__rating\">${vote_average.toFixed(1)}</p>\n    </div>\n    </li>\n`;\n}\n","import libraryGetRefs from './libraryGetRefs.js';\nimport { MovieAPI } from '../movieAPI.js';\nimport { libraryRenderMarkup } from './libraryRenderMarkup.js';\nimport Notiflix, { Notify } from 'notiflix';\n\nconst movieAPI = new MovieAPI();\n\nconst LOCAL_STORAGE_WATCHED_KEY = 'WATCHED';\nlocalStorage.getItem(LOCAL_STORAGE_WATCHED_KEY);\nconst receivedDataWatched = JSON.parse(\n  localStorage.getItem(LOCAL_STORAGE_WATCHED_KEY)\n);\nlibraryGetRefs().watchedBthRef.addEventListener('click', onWatchBtnHandle);\n\nfunction onWatchBtnHandle() {\n  if (receivedDataWatched === null) {\n    Notify.warning('Please go to home page and add movie to \"Watched\" list');\n    libraryGetRefs().emptyListContainer.classList.remove('is-hidden');\n    return;\n  }\n  libraryGetRefs().containerListRef.innerHTML = '';\n\n  const markup = receivedDataWatched\n    .map(element => {\n      return libraryRenderMarkup(element);\n    })\n    .join('');\n  libraryGetRefs().containerListRef.insertAdjacentHTML('beforeend', markup);\n}\n","import libraryGetRefs from './libraryGetRefs.js';\nimport { MovieAPI } from '../movieAPI.js';\nimport { libraryRenderMarkup } from './libraryRenderMarkup.js';\nimport Notiflix, { Notify } from 'notiflix';\n\nconst movieAPI = new MovieAPI();\n\nconst LOCAL_STORAGE_QUEUE_KEY = 'QUEUE';\n\nlocalStorage.getItem(LOCAL_STORAGE_QUEUE_KEY);\nconst receivedDataWatched = JSON.parse(\n  localStorage.getItem(LOCAL_STORAGE_QUEUE_KEY)\n);\n\nlibraryGetRefs().queueBtnRef.addEventListener('click', onQueueBtnHandle);\n\nfunction onQueueBtnHandle() {\n  if (receivedDataWatched === null) {\n    Notify.warning('Please go to home page and add movie to \"Watched\" list');\n    libraryGetRefs().emptyListContainer.classList.remove('is-hidden');\n    return;\n  }\n  libraryGetRefs().containerListRef.innerHTML = '';\n  const markup = receivedDataWatched\n    .map(element => {\n      return libraryRenderMarkup(element);\n    })\n    .join('');\n  libraryGetRefs().containerListRef.insertAdjacentHTML('beforeend', markup);\n}\n","import libraryGetRefs from './libraryGetRefs.js';\nimport { MovieAPI } from '../movieAPI.js';\nimport { renderModalMarkup } from '../renderModalMarkup';\nimport Notiflix, { Notify } from 'notiflix';\nimport getRefs from '../getRefs';\n\nconst movieAPI = new MovieAPI();\nlet currentResult = {};\nlet watchedMoviesArr = [];\nconst LOCAL_STORAGE_WATCHED = 'WATCHED';\nlet queueMoviesArr = [];\nconst LOCAL_STORAGE_QUEUE = 'QUEUE';\n\n// ------Перевірка масивів та додавання картинки якщо пусто----\n\n// const errorImg = document.querySelector('.js-empty-list-container');\n\n// if (watchedMoviesArr.length === 0) {\n//   errorImg.classList.remove('is-hidden', 'errorImg-hidden');\n// } else {\n//   errorImg.classList.add('is-hidden', 'errorImg-hidden');\n// }\n// if (watchedMoviesArr.length === 0) {\n//   errorImg.classList.remove('is-hidden', 'errorImg-hidden');\n// } else {\n//   errorImg.classList.add('is-hidden', 'errorImg-hidden');\n// }\n// ------------------------------------------------------\nlibraryGetRefs().containerListRef.addEventListener(\n  'click',\n  onFilmCardClickHandle\n);\n\nfunction onFilmCardClickHandle(evt) {\n  let id = evt.target.closest('.film-card__item').dataset.id;\n  if (evt.target === evt.currentTarget) {\n    return;\n  }\n  libraryGetRefs().modal.classList.remove('is-hidden');\n  document.addEventListener('keydown', onEscapeCloseHandle);\n  libraryGetRefs().modalContainer.addEventListener(\n    'click',\n    onModalContainerClickHandle\n  );\n  movieAPI\n    .getFilms(id)\n    .then(result => {\n      // console.log(result);\n      const markup = renderModalMarkup(result);\n\n      libraryGetRefs().modalFilm.innerHTML = markup;\n\n      onAddButtonsFunctinal(result);\n    })\n    // Adding functioning for buttons\n\n    .catch(error => console.log(error))\n    .finally(() => {\n      getRefs().loaderModal.classList.add('visually-hidden');\n    });\n}\n\nlibraryGetRefs().modalCloseBtnRef.addEventListener(\n  'click',\n  onModalCloseBtnHandle\n);\n\nfunction onModalCloseBtnHandle() {\n  libraryGetRefs().modal.classList.add('is-hidden');\n  document.removeEventListener('keydown', onEscapeCloseHandle);\n  libraryGetRefs().modalContainer.removeEventListener(\n    'click',\n    onModalContainerClickHandle\n  );\n  // /-----для перезагрузки по закриттю вікна---\n  // location.reload();\n  // /-----для перезагрузки по закриттю вікна---\n}\n\nfunction onModalContainerClickHandle(evt) {\n  if (evt.target === evt.currentTarget) {\n    onModalCloseBtnHandle();\n  }\n}\nfunction onEscapeCloseHandle(evt) {\n  if (evt.key === 'Escape') {\n    onModalCloseBtnHandle();\n  }\n}\nfunction onAddButtonsFunctinal(result) {\n  currentResult = result;\n  const addToWatchedBtnRef = document.querySelector('.js-btn-watched');\n  addToWatchedBtnRef.addEventListener('click', onAddToWatchedHandle);\n  if (localStorage.getItem(LOCAL_STORAGE_WATCHED) !== null) {\n    watchedMoviesArr = [\n      ...JSON.parse(localStorage.getItem(LOCAL_STORAGE_WATCHED)),\n    ];\n  }\n\n  if (watchedMoviesArr.some(({ id }) => id === result.id)) {\n    addToWatchedBtnRef.textContent = 'Remove from watched';\n  }\n  // --------------\n  if (localStorage.getItem(LOCAL_STORAGE_QUEUE) !== null) {\n    queueMoviesArr = [...JSON.parse(localStorage.getItem(LOCAL_STORAGE_QUEUE))];\n  }\n  const addToQueueBtnRef = document.querySelector('.js-btn-queue');\n  addToQueueBtnRef.addEventListener('click', onAddToQueueHandle);\n  if (queueMoviesArr.some(({ id }) => id === result.id)) {\n    addToQueueBtnRef.textContent = 'Remove from queue';\n  }\n}\n// -----------------------------------------------------------------\n\nconst onAddToWatchedHandle = evt => {\n  let filmObject = currentResult;\n  // let id = filmObject.id;\n  const addToWatchedBtnRef = document.querySelector('.js-btn-watched');\n  if (localStorage.getItem(LOCAL_STORAGE_WATCHED) !== null) {\n    watchedMoviesArr = [\n      ...JSON.parse(localStorage.getItem(LOCAL_STORAGE_WATCHED)),\n    ];\n  }\n  // check for unique value(id)\n\n  if (watchedMoviesArr.lenght === 0) {\n    watchedMoviesArr.push(filmObject);\n    Notify.success('Film add to watched');\n    addToWatchedBtnRef.textContent = 'Remove from watched';\n  } else if (!watchedMoviesArr.some(({ id }) => id === filmObject.id)) {\n    watchedMoviesArr.push(filmObject);\n    Notify.success('Film add to watched');\n    addToWatchedBtnRef.textContent = 'Remove from watched';\n  } else {\n    watchedMoviesArr = watchedMoviesArr.filter(\n      film => Number(film) !== filmObject.id\n    );\n    Notify.warning('Film Remove from watched');\n    let index = watchedMoviesArr.findIndex(({ id }) => id === filmObject.id);\n    watchedMoviesArr.splice(index, 1);\n    addToWatchedBtnRef.textContent = 'Add to watched';\n  }\n\n  try {\n    const serializedState = JSON.stringify(watchedMoviesArr);\n    localStorage.setItem(LOCAL_STORAGE_WATCHED, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n// --------------onAddToQueueHandle\nconst onAddToQueueHandle = evt => {\n  let filmObject = currentResult;\n  const addToQueueBtnRef = document.querySelector('.js-btn-queue');\n  if (localStorage.getItem(LOCAL_STORAGE_QUEUE) !== null) {\n    queueMoviesArr = [...JSON.parse(localStorage.getItem(LOCAL_STORAGE_QUEUE))];\n  }\n  // check for unique value(id)\n  if (queueMoviesArr.lenght === 0) {\n    queueMoviesArr.push(filmObject);\n    Notify.success('Film added to queue');\n    addToQueueBtnRef.textContent = 'Remove from queue';\n  } else if (!queueMoviesArr.some(({ id }) => id === filmObject.id)) {\n    queueMoviesArr.push(filmObject);\n    Notify.success('Film added to queue');\n    addToQueueBtnRef.textContent = 'Remove from queue';\n  } else {\n    queueMoviesArr = queueMoviesArr.filter(\n      film => Number(film) !== filmObject.id\n    );\n    Notify.warning('Film Removed from queue');\n    let index = queueMoviesArr.findIndex(({ id }) => id === filmObject.id);\n    queueMoviesArr.splice(index, 1);\n    addToQueueBtnRef.textContent = 'Add to queue';\n  }\n  try {\n    const serializedState = JSON.stringify(queueMoviesArr);\n    localStorage.setItem(LOCAL_STORAGE_QUEUE, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n"],"names":["parcelRequire","$5b1d70604403000b$export$2e2bcd8739ae039","modal","document","querySelector","containerListRef","modalCloseBtnRef","modalFilm","modalContainer","watchedBthRef","queueBtnRef","emptyListContainer","$b50bdd6edab182ea$export$e66b2d78411a22fb","id","genres","title","vote_average","release_date","poster_path","genresCreate","map","name","length","slice","join","toFixed","$9Bkxl","MovieAPI","localStorage","getItem","$8d8dcee2ecb58d73$var$receivedDataWatched","JSON","parse","addEventListener","$eWCmQ","Notify","warning","classList","remove","innerHTML","markup","element","insertAdjacentHTML","$d3b755b89a5d4914$var$receivedDataWatched","$8c344999231b5261$var$movieAPI","$8c344999231b5261$var$currentResult","$8c344999231b5261$var$watchedMoviesArr","$8c344999231b5261$var$queueMoviesArr","$8c344999231b5261$var$onModalCloseBtnHandle","add","removeEventListener","$8c344999231b5261$var$onEscapeCloseHandle","$8c344999231b5261$var$onModalContainerClickHandle","evt","target","currentTarget","key","closest","dataset","getFilms","then","result","$2zc8m","renderModalMarkup","addToWatchedBtnRef","$8c344999231b5261$var$onAddToWatchedHandle","some","textContent","addToQueueBtnRef","$8c344999231b5261$var$onAddToQueueHandle","$8c344999231b5261$var$onAddButtonsFunctinal","catch","error","console","log","finally","$1DTXP","default","loaderModal","filmObject","lenght","push","success","filter","film","Number","index","findIndex","splice","serializedState","stringify","setItem","message"],"version":3,"file":"mylibrary.f8a824be.js.map"}
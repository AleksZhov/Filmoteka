{"mappings":"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","sources":["src/library-index.js","src/js/library-js/libraryGetRefs.js","src/js/library-js/libraryRenderMarkup.js","src/js/library-js/library.js","src/js/library-js/library-queue.js","src/js/library-js/libraryOpenModal.js"],"sourcesContent":["import './js/team-modal.js';\nimport './js/preloader.js';\nimport './js/library-js/library.js';\nimport './js/library-js/library-queue.js';\nimport './js/library-js/libraryOpenModal.js';\n","const libraryGetRefs = () => {\n  return {\n    modal: document.querySelector('.modal'),\n    containerListRef: document.querySelector('.container__list'),\n    modalCloseBtnRef: document.querySelector('.modal__close'),\n    modalFilm: document.querySelector('.modal__film'),\n    modalContainer: document.querySelector('.modal__conteiner'),\n    watchedBthRef: document.querySelector('.js-btn-watched-render'),\n    queueBtnRef: document.querySelector('.js-btn-queue-render'),\n  };\n};\nexport default libraryGetRefs;\n","export function libraryRenderMarkup({\n  id,\n  genres,\n  title,\n  vote_average,\n  release_date,\n  poster_path,\n}) {\n  let genresCreate = genres.map(({ name }) => {\n    return name;\n  });\n  if (genresCreate.length > 2) {\n    genresCreate = genresCreate.slice(0, 2).join(', ') + `, Other`;\n  } else {\n    genresCreate = genresCreate.join(', ');\n  }\n  return `\n    <li class=\"film-card__item\" data-id=${id}>\n      <img class=\"film-card__img\"  src=\"https://image.tmdb.org/t/p/w500/${poster_path} \" alt=\"film poster\"  />\n    <h2 class=\"film-card__title\">${title}</h2>\n    <div class=\"film-card__flex\">\n    <p class=\"film-card__flex__text\">${genresCreate} |\n    </p>\n    <p class=\"film-card__flex__text\">${release_date.slice(0, -6)}</p>\n    <p class=\"film-card__flex__rating\">${vote_average}</p>\n    </div>\n    </li>\n`;\n}\n","import libraryGetRefs from './libraryGetRefs.js';\nimport { MovieAPI } from '../movieAPI.js';\nimport { libraryRenderMarkup } from './libraryRenderMarkup.js';\n\nconst movieAPI = new MovieAPI();\n\nconst watchedMovies = [];\nconst LOCAL_STORAGE_WATCHED_KEY = 'WATCHED';\n\nlocalStorage.getItem(LOCAL_STORAGE_WATCHED_KEY);\nconst receivedDataWatched = JSON.parse(\n  localStorage.getItem(LOCAL_STORAGE_WATCHED_KEY)\n);\n\nlibraryGetRefs().watchedBthRef.addEventListener('click', onWatchBtnHandle);\n\nfunction onWatchBtnHandle() {\n  libraryGetRefs().containerListRef.innerHTML = '';\n  receivedDataWatched.forEach(element => {\n    movieAPI\n      .getFilms(element)\n      .then(result => {\n        const markup = libraryRenderMarkup(result);\n\n        libraryGetRefs().containerListRef.insertAdjacentHTML(\n          'beforeend',\n          markup\n        );\n      })\n      .catch(error => console.log(error));\n  });\n}\n","import libraryGetRefs from './libraryGetRefs.js';\nimport { MovieAPI } from '../movieAPI.js';\nimport { libraryRenderMarkup } from './libraryRenderMarkup.js';\n\nconst movieAPI = new MovieAPI();\n\nconst watchedMovies = [];\nconst LOCAL_STORAGE_WATCHED_KEY = 'QUEUE';\n\nlocalStorage.getItem(LOCAL_STORAGE_WATCHED_KEY);\nconst receivedDataWatched = JSON.parse(\n  localStorage.getItem(LOCAL_STORAGE_WATCHED_KEY)\n);\n\nlibraryGetRefs().queueBtnRef.addEventListener('click', onQueueBtnHandle);\n\nfunction onQueueBtnHandle() {\n  libraryGetRefs().containerListRef.innerHTML = '';\n  receivedDataWatched.forEach(element => {\n    movieAPI\n      .getFilms(element)\n      .then(result => {\n        const markup = libraryRenderMarkup(result);\n\n        libraryGetRefs().containerListRef.insertAdjacentHTML(\n          'beforeend',\n          markup\n        );\n      })\n      .catch(error => console.log(error));\n  });\n}\n","import libraryGetRefs from './libraryGetRefs.js';\nimport { MovieAPI } from '../movieAPI.js';\nimport { renderModalMarkup } from '../renderModalMarkup';\nimport Notiflix, { Notify } from 'notiflix';\n\nconst movieAPI = new MovieAPI();\n\nlibraryGetRefs().containerListRef.addEventListener(\n  'click',\n  onFilmCardClickHandle\n);\n\nfunction onFilmCardClickHandle(evt) {\n  let id = evt.target.closest('.film-card__item').dataset.id;\n  if (evt.target === evt.currentTarget) {\n    return;\n  }\n  libraryGetRefs().modal.classList.remove('is-hidden');\n  document.addEventListener('keydown', onEscapeCloseHandle);\n  libraryGetRefs().modalContainer.addEventListener(\n    'click',\n    onModalContainerClickHandle\n  );\n  movieAPI\n    .getFilms(id)\n    .then(result => {\n      const markup = renderModalMarkup(result);\n      libraryGetRefs().modalFilm.innerHTML = markup;\n    })\n    // Adding functioning for buttons\n    .then(() => {\n      onAddButtonsFunctinal();\n    })\n    .catch(error => console.log(error));\n}\n\nlibraryGetRefs().modalCloseBtnRef.addEventListener(\n  'click',\n  onModalCloseBtnHandle\n);\n\nfunction onModalCloseBtnHandle() {\n  libraryGetRefs().modal.classList.add('is-hidden');\n  document.removeEventListener('keydown', onEscapeCloseHandle);\n  libraryGetRefs().modalContainer.removeEventListener(\n    'click',\n    onModalContainerClickHandle\n  );\n}\n\nfunction onModalContainerClickHandle(evt) {\n  if (evt.target === evt.currentTarget) {\n    onModalCloseBtnHandle();\n  }\n}\nfunction onEscapeCloseHandle(evt) {\n  if (evt.key === 'Escape') {\n    onModalCloseBtnHandle();\n  }\n}\nfunction onAddButtonsFunctinal() {\n  const addToWatchedBtnRef = document.querySelector('.js-btn-watched');\n  addToWatchedBtnRef.addEventListener('click', onAddToWatchedHandle);\n  // --------------цей код додано мною\n  const addToQueueBtnRef = document.querySelector('.js-btn-queue');\n  addToQueueBtnRef.addEventListener('click', onAddToQueueHandle);\n}\n// -----------------------------------------------------------------\nlet watchedMoviesArr = [];\nconst LOCAL_STORAGE_WATCHED = 'WATCHED';\nlet queueMoviesArr = [];\nconst LOCAL_STORAGE_QUEUE = 'QUEUE';\n\nconst onAddToWatchedHandle = evt => {\n  let id = evt.target.dataset.id;\n  const addToWatchedBtnRef = document.querySelector('.js-btn-watched');\n  if (localStorage.getItem(LOCAL_STORAGE_WATCHED) !== null) {\n    watchedMoviesArr = [\n      ...JSON.parse(localStorage.getItem(LOCAL_STORAGE_WATCHED)),\n    ];\n  }\n  // check for unique value(id)\n  if (!watchedMoviesArr.includes(id)) {\n    watchedMoviesArr.push(id);\n    Notify.success('Film add to watched');\n    addToWatchedBtnRef.textContent = 'Remove from watched';\n  } else {\n    watchedMoviesArr = watchedMoviesArr.filter(film => Number(film) !== id);\n    Notify.warning('Film Remove from watched');\n    let index = watchedMoviesArr.indexOf(id);\n    watchedMoviesArr.splice(index, 1);\n    addToWatchedBtnRef.textContent = 'Add to watched';\n  }\n\n  try {\n    const serializedState = JSON.stringify(watchedMoviesArr);\n    localStorage.setItem(LOCAL_STORAGE_WATCHED, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\n// --------------onAddToQueueHandle\nconst onAddToQueueHandle = evt => {\n  let id = evt.target.dataset.id;\n  if (localStorage.getItem(LOCAL_STORAGE_QUEUE) !== null) {\n    queueMoviesArr = [...JSON.parse(localStorage.getItem(LOCAL_STORAGE_QUEUE))];\n  }\n  // check for unique value(id)\n  if (!queueMoviesArr.includes(id)) {\n    queueMoviesArr.push(id);\n    Notify.success('Фільм додано');\n    evt.target.textContent = 'Remove from queue';\n  } else {\n    queueMoviesArr = queueMoviesArr.filter(film => Number(film) !== id);\n    Notify.warning('Film Remove from queue');\n    let index = queueMoviesArr.indexOf(id);\n    queueMoviesArr.splice(index, 1);\n    evt.target.textContent = 'Add to queue';\n  }\n  try {\n    const serializedState = JSON.stringify(queueMoviesArr);\n    localStorage.setItem(LOCAL_STORAGE_QUEUE, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n"],"names":["parcelRequire","$cb3c9e5c485b0f3f$export$2e2bcd8739ae039","modal","document","querySelector","containerListRef","modalCloseBtnRef","modalFilm","modalContainer","watchedBthRef","queueBtnRef","$b20b15d15bba97a0$export$e66b2d78411a22fb","param1","id","genres","title","vote_average","release_date","poster_path","genresCreate","map","param","name","length","slice","join","concat","$bf23c4fb94b56fec$var$movieAPI","MovieAPI","$bf23c4fb94b56fec$var$LOCAL_STORAGE_WATCHED_KEY","localStorage","getItem","$bf23c4fb94b56fec$var$receivedDataWatched","JSON","parse","addEventListener","innerHTML","forEach","element","getFilms","then","result","markup","insertAdjacentHTML","catch","error","console","log","$a63883ed63f46b0f$var$movieAPI","$a63883ed63f46b0f$var$LOCAL_STORAGE_WATCHED_KEY","$a63883ed63f46b0f$var$receivedDataWatched","$8nrFW","$772555ccfa053c59$var$movieAPI","$lHIzZ","$772555ccfa053c59$var$onModalCloseBtnHandle","classList","add","removeEventListener","$772555ccfa053c59$var$onEscapeCloseHandle","$772555ccfa053c59$var$onModalContainerClickHandle","evt","target","currentTarget","key","closest","dataset","remove","$k5SnF","renderModalMarkup","$772555ccfa053c59$var$onAddToWatchedHandle","$772555ccfa053c59$var$onAddToQueueHandle","$772555ccfa053c59$var$watchedMoviesArr","$772555ccfa053c59$var$LOCAL_STORAGE_WATCHED","$772555ccfa053c59$var$queueMoviesArr","$772555ccfa053c59$var$LOCAL_STORAGE_QUEUE","addToWatchedBtnRef","$parcel$interopDefault","includes","filter","film","Number","$iU1Pc","Notify","warning","index","indexOf","splice","textContent","push","success","serializedState","stringify","setItem","message"],"version":3,"file":"mylibrary.9f77ba37.js.map"}